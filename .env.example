# ============================================================================
# Awesome Site - Environment Variables
# ============================================================================
# Copy this file to .env.local and fill in the values.
#
# Legend:
#   [REQUIRED]    - App will not start without this
#   [RECOMMENDED] - App works without it but functionality is degraded
#   [OPTIONAL]    - Enables optional features
#   [TESTING]     - Only needed for E2E tests
#   [DEPRECATED]  - Will be removed; migrate to the replacement
# ============================================================================

# ──────────────────────────────────────────────────────────────────────────────
# DATABASE (Neon PostgreSQL) [REQUIRED]
# ──────────────────────────────────────────────────────────────────────────────

# Pooled connection string - used by the app at runtime via @neondatabase/serverless WebSocket pool.
# Format: postgresql://user:pass@ep-xxx-123.us-east-2.aws.neon.tech/dbname?sslmode=require
DATABASE_URL="postgresql://user:pass@ep-xxx-123.us-east-2.aws.neon.tech/dbname?sslmode=require"

# Direct (non-pooled) connection string - used by Prisma migrations (DDL requires direct TCP).
# Get this from Neon dashboard > Connection Details > uncheck "Pooled connection".
DIRECT_DATABASE_URL="postgresql://user:pass@ep-xxx-123.us-east-2.aws.neon.tech/dbname?sslmode=require"

# ──────────────────────────────────────────────────────────────────────────────
# AUTHENTICATION (Better Auth) [REQUIRED]
# ──────────────────────────────────────────────────────────────────────────────

# Secret key for signing auth tokens and cookies. Must be at least 32 characters.
# Generate with: openssl rand -base64 32
BETTER_AUTH_SECRET="generate-a-random-secret-at-least-32-chars"

# ──────────────────────────────────────────────────────────────────────────────
# SITE URL [REQUIRED]
# ──────────────────────────────────────────────────────────────────────────────

# Canonical site URL. Used for auth callbacks, sitemap, robots.txt, JSON-LD, and OG tags.
# In production: https://yourdomain.com (no trailing slash)
# In development: http://localhost:3000
NEXT_PUBLIC_SITE_URL="http://localhost:3000"

# [DEPRECATED] These are replaced by NEXT_PUBLIC_SITE_URL above.
# They still exist in code and will be removed in a future task (3.2).
# If set, they should match NEXT_PUBLIC_SITE_URL.
# NEXT_PUBLIC_BETTER_AUTH_URL="http://localhost:3000"
# NEXT_PUBLIC_BASE_URL="http://localhost:3000"

# ──────────────────────────────────────────────────────────────────────────────
# SENTRY ERROR TRACKING [RECOMMENDED]
# https://sentry.io
# ──────────────────────────────────────────────────────────────────────────────

# Server-side Sentry DSN (used in sentry.server.config.ts and sentry.edge.config.ts)
SENTRY_DSN=""

# Client-side Sentry DSN (used in sentry.client.config.ts, must be NEXT_PUBLIC_ prefixed)
NEXT_PUBLIC_SENTRY_DSN=""

# Auth token for uploading source maps during build. Get from Sentry > Settings > Auth Tokens.
SENTRY_AUTH_TOKEN=""

# Sentry organization and project slugs (for source map uploads)
SENTRY_ORG=""
SENTRY_PROJECT=""

# ──────────────────────────────────────────────────────────────────────────────
# UPSTASH REDIS (Distributed Rate Limiting) [RECOMMENDED]
# https://upstash.com
# Falls back to in-memory rate limiting if not set (fine for dev, not for prod).
# ──────────────────────────────────────────────────────────────────────────────

UPSTASH_REDIS_REST_URL=""
UPSTASH_REDIS_REST_TOKEN=""

# ──────────────────────────────────────────────────────────────────────────────
# CRON JOBS [RECOMMENDED]
# ──────────────────────────────────────────────────────────────────────────────

# Secret for authenticating cron job requests (e.g., /api/cron/cleanup).
# Vercel cron jobs send this in the Authorization header.
# Generate with: openssl rand -base64 32
CRON_SECRET=""

# ──────────────────────────────────────────────────────────────────────────────
# OAUTH PROVIDERS [OPTIONAL]
# Social login - app works without these, providers are auto-disabled when missing.
# ──────────────────────────────────────────────────────────────────────────────

# GitHub OAuth (https://github.com/settings/developers)
GITHUB_CLIENT_ID=""
GITHUB_CLIENT_SECRET=""

# Google OAuth (https://console.cloud.google.com/apis/credentials)
GOOGLE_CLIENT_ID=""
GOOGLE_CLIENT_SECRET=""

# ──────────────────────────────────────────────────────────────────────────────
# GITHUB API [OPTIONAL]
# ──────────────────────────────────────────────────────────────────────────────

# Personal access token for GitHub API integration (awesome-list sync).
# Needs repo:read scope. Create at https://github.com/settings/tokens
GITHUB_TOKEN=""

# ──────────────────────────────────────────────────────────────────────────────
# AI ENRICHMENT [OPTIONAL]
# ──────────────────────────────────────────────────────────────────────────────

# Anthropic API key for AI-powered resource enrichment (uses claude-haiku-4-5).
# Get from https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=""

# ──────────────────────────────────────────────────────────────────────────────
# CORS [OPTIONAL]
# ──────────────────────────────────────────────────────────────────────────────

# Comma-separated list of allowed origins for API-key-authenticated endpoints.
# Example: "https://app1.example.com,https://app2.example.com"
# If not set, CORS headers are not added.
CORS_ALLOWED_ORIGINS=""

# ──────────────────────────────────────────────────────────────────────────────
# DATA MIGRATION (One-Time) [OPTIONAL]
# ──────────────────────────────────────────────────────────────────────────────

# Legacy source database for running data migration script (npx tsx scripts/migrate-data.ts).
# Only needed once during initial data migration from legacy Drizzle-based app.
SOURCE_DATABASE_URL="postgresql://user:pass@ep-legacy-123.us-east-2.aws.neon.tech/dbname?sslmode=require"

# ──────────────────────────────────────────────────────────────────────────────
# E2E TESTING [TESTING]
# ──────────────────────────────────────────────────────────────────────────────

# Admin credentials for Playwright E2E tests (loginAsAdmin helper).
# These must match an existing admin user in the database.
E2E_ADMIN_EMAIL=""
E2E_ADMIN_PASSWORD=""
